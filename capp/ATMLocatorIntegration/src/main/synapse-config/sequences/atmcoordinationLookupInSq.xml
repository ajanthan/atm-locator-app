<?xml version="1.0" encoding="UTF-8"?>
<sequence name="atmcoordinationLookupInSq" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <log/>
    <payloadFactory media-type="xml">
        <format>
            <soapenv:Envelope xmlns:geo="http://geo.zipcode.wso2" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
                <soapenv:Header/>
                <soapenv:Body>
                    <geo:getZipCode>
                        <geo:longitude>1.0</geo:longitude>
                        <geo:latitude>2.0</geo:latitude>
                    </geo:getZipCode>
                </soapenv:Body>
            </soapenv:Envelope>
        </format>
        <args/>
    </payloadFactory>
    <header name="Action" scope="default" value="urn:mediate"/>
    <property name="messageType" scope="axis2" type="STRING" value="text/xml"/>
    <call>
        <endpoint>
            <address format="soap11" uri="http://localhost:8280/services/zipcodeService"/>
        </endpoint>
    </call>
    <filter xmlns:ns="http://geo.zipcode.wso2" xpath="//ns:getZipCodeResponse/ns:return">
        <then>
            <log level="custom">
                <property name="value" value="coordination valid zip code fond"/>
            </log>
            <call>
                <endpoint>
                    <address format="soap12" uri="http://localhost:8280/services/zipcodeService"/>
                </endpoint>
            </call>
            <property expression="//ns:getZipCodeResponse/ns:return" name="uri.var.zipcode" scope="default" type="STRING"/>
            <sequence key="atmlocatorLookupInSq"/>
        </then>
        <else/>
    </filter>
</sequence>
